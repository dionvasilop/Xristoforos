# Κεφάλαιο 3 - Σχεδίαση ακολουθιακής λογικής

Συγγραφείς διαφανειών: Γιώργος Παπαδημητρίου, Αντώνης Πασχάλης, Διονύσης Βασιλόπουλος.  
Μετατροπη σε προβασιμη μορφ
## Slide 1

### Περιεχόμενα κεφαλαίου 3

* Εισαγωγή
* Διασυζευγμένοι αντιστροφείς
* Latches και Flip-Flops
* Σύγχρονη ακολουθιακή λογική
* Μηχανές πεπερασμένων καταστάσεων (FSM)
* Μηχανές Moore-Mealy
* Χρονισμός ακολουθιακής λογικής
* Παραλληλισμός

## Slide 2
### Ακολουθιακή λογική

* Οι έξοδοι των ακολουθιακών κυκλωμάτων εξαρτώνται όχι μόνο από τις τρέχουσες τιμές των εισόδων, αλλά και από τις προηγούμενες τιμές αυτών
* Τα ακολουθιακά κυκλώματα έχουν μνήμη, δηλαδή «διυλίζουν» τις προηγούμενες τιμές εισόδων ώστε να διατηρούν αποθηκευμένη μία μικρότερη ποσότητα πληροφοριών, η οποία ονομάζεται κατάσταση (state)
* Για να επιτευχθεί η αποθήκευση μίας κατάστασης απαιτείται ανάδραση από την έξοδο στην είσοδο
* Ένα ακολουθιακό κύκλωμα με Ν πιθανές καταστάσεις διατηρεί αποθηκευμένη μία κατάσταση μεγέθους από log2N μέχρι Ν bit
* Τα latches και τα flip-flops διατηρούν αποθηκευμένη μία κατάσταση μεγέθους ενός bit, δηλαδή έχουν δύο πιθανές καταστάσεις (0 και 1)
* Οι έξοδοι είναι συναρτήσεις των εισόδων και της αποθηκευμένης κατάστασης του κυκλώματος

**Ιδιότητες των κυκλωμάτων με μνήμη**

Ένα κύκλωμα που έχει μνήμη πρέπει να έχει τις εξής 3 ιδιότητες:

* Πρέπει να μπορεί να διατηρεί αποθηκευμένη μία κατάσταση
* Πρέπει να μπορούμε να διαβάζουμε την αποθηκευμένη κατάσταση
* Πρέπει να μπορούμε να αλλάζουμε την αποθηκευμένη κατάσταση σε μία νέα κατάσταση
* Η νέα κατάσταση είναι συνάρτηση της προηγούμενης κατάστασης και ενδεχομένως και των εισόδων του ακολουθιακού κυκλώματος

**Διασυζευγμένοι αντιστροφείς**

* Το θεμελιώδες δομικό στοιχείο μνήμης είναι ένα δισταθές (bistable) στοιχείο, δηλαδή ένα στοιχείο με δύο σταθερές καταστάσεις, το 0 και το 1
* Οι αντιστροφείς είναι διασυζευγμένοι (cross-coupled), που σημαίνει ότι η είσοδος του αντιστροφέα I1 αποτελεί έξοδο του αντιστροφέα I2 και αντίστροφα, ώστε να δημιουργείται ανάδραση
* Το κύκλωμα δεν διαθέτει εισόδους, αλλά έχει δύο εξόδους, τις Q και Q bar, που είναι συμπληρωματικές
* Το κύκλωμα διατηρεί αποθηκευμένη μία κατάσταση Q μεγέθους ενός bit, που ταυτίζεται με την έξοδο Q
* Μπορούμε να αναφερόμαστε και στην μεταβλητή κατάστασης Q που έχει ως τιμή την τιμή της εξόδου Q

**Λειτουργία διασυζευγμένων αντιστροφέων**

* Όταν βρίσκεται στην σταθερή κατάσταση Q = 0 τότε οι έξοδοι είναι: Q = 0 και Q bar = 1
* Όταν βρίσκεται στην σταθερή κατάσταση Q = 1 τότε οι έξοδοι είναι: Q = 1 και Q bar = 0

**Λειτουργία διασυζευγμένων αντιστροφέων**

Το κύκλωμα των διασυζευγμένων αντιστροφέων έχει τις εξής ιδιότητες:

* Μπορεί να διατηρεί αποθηκευμένη μία κατάσταση μεγέθους ενός bit
* Την σταθερή κατάσταση 0 ή την σταθερή κατάσταση 1
* Μπορούμε να διαβάσουμε την αποθηκευμένη κατάσταση
* Εξετάζοντας την τιμή της εξόδου Q
* Δεν μπορούμε να αλλάξουμε την αποθηκευμένη κατάσταση σε μία νέα κατάσταση
* Το κύκλωμα δεν έχει εισόδους, αλλά όταν τίθεται σε λειτουργία πηγαίνει ανεξέλεγκτα στην σταθερή κατάσταση 0 ή στην σταθερή κατάσταση 1
* Υπάρχει ενδεχόμενο για ένα χρονικό διάστημα να παραμείνει σε μία μια τρίτη πιθανή κατάσταση, την μετασταθερή (metastable) κατάσταση

**Μετασταθερή Κατάσταση**

* Κατά την έναρξη της λειτουργίας του κυκλώματος των διασυζευγμένων αντιστροφέων, το κύκλωμα μπορεί να παραμείνει προσωρινά στην μετασταθερή (metastable) κατάσταση
* Όπου και οι δύο έξοδοι Q και Q bar βρίσκονται κατά προσέγγιση στο μέσο μεταξύ του 0 και του 1

**Set-Reset Latch (Μανδαλωτής SR)**

* Το Set-Reset latch είναι το πιο απλό δισταθές ακολουθιακό κύκλωμα
* Αποτελείται από δύο διασυζευγμένες πύλες NOR
* Η διαφορά του με τους διασυζευγμένους αντιστροφείς είναι ότι η κατάσταση του μπορεί πλέον να ελεγχθεί μέσω των εισόδων S (set) και R (reset)
* Έχει δύο εξόδους Q και Q bar που σε κανονική λειτουργία είναι συμπληρωματικές
* Το κύκλωμα διατηρεί αποθηκευμένη μία κατάσταση Q μεγέθους ενός bit, που ταυτίζεται με την έξοδο Q
* Την σταθερή κατάσταση 0 ή την σταθερή κατάσταση 1

**Ενεργοποίηση της εισόδου Set**

* Η είσοδος S (set), όταν ενεργοποιηθεί (S=1) θέτει την έξοδο της πύλης NOR N2 στην τιμή 0 (Q bar=0)
* Σε κανονική λειτουργία η έξοδος Q bar πρέπει να είναι συμπληρωματική της εξόδου Q, άρα η έξοδος της πύλης NOR N1 πρέπει να τεθεί στην τιμή 1 (Q=1)
* Άρα η είσοδος R (reset) πρέπει να τεθεί στην τιμή 0 (R=0)
* Σε κανονική λειτουργία το κύκλωμα τίθεται στην σταθερή κατάσταση 1 εάν S=1 και R=0
* Γενικά, η είσοδος S (set), όταν ενεργοποιηθεί, δίνει στο κύκλωμα την εντολή: "Πήγαινε στην κατάσταση 1"

**Ενεργοποίηση της εισόδου Reset**

* Η είσοδος R (reset), όταν ενεργοποιηθεί (R=1) θέτει την έξοδο της πύλης NOR N1 στην τιμή 0 (Q=0)
* Σε κανονική λειτουργία η έξοδος Q bar πρέπει να είναι συμπληρωματική της εξόδου Q, άρα η έξοδος της πύλης NOR N2 πρέπει να τεθεί στην τιμή 1 (Q bar=1)
* Άρα η είσοδος S (set) πρέπει να τεθεί στην τιμή 0 (S=0)
* Σε κανονική λειτουργία το κύκλωμα τίθεται στην σταθερή κατάσταση 0 εάν S=0 και R=1
* Γενικά, η είσοδος R (reset), όταν ενεργοποιηθεί, δίνει στο κύκλωμα την εντολή: "Επανάφερε την κατάσταση 0"

**Απενεργοποίηση και των δύο εισόδων Set και Reset**

* Η είσοδος S (set), όταν απενεργοποιηθεί (S=0) εξαρτά την έξοδο της πύλης NOR N2 από την προηγούμενη τιμή της εξόδου Q (Q bar=NOT Qprev)
* Η είσοδος R (reset), όταν απενεργοποιηθεί (R=0) εξαρτά την έξοδο της πύλης NOR N1 από την προηγούμενη τιμή της εξόδου Q bar (Q=NOT Q bar prev)
* Εάν το κύκλωμα βρισκόταν στην σταθερή κατάσταση 1 (ήταν S=1 και R=0) τότε Qprev=1 και Q bar prev=0, άρα Q bar=NOT 1=0 και Q=NOT 0=1, δηλαδή διατηρεί αποθηκευμένη την προηγούμενη κατάσταση 1

**Απενεργοποίηση και των δύο εισόδων Set και Reset**

* Η είσοδος S (set), όταν απενεργοποιηθεί (S=0) εξαρτά την έξοδο της πύλης NOR N2 από την προηγούμενη τιμή της εξόδου Q (Q bar=NOT Qprev)
* Η είσοδος R (reset), όταν απενεργοποιηθεί (R=0) εξαρτά την έξοδο της πύλης NOR N1 από την προηγούμενη τιμή της εξόδου Q bar (Q=NOT Q bar prev)
* Εάν το κύκλωμα βρισκόταν στην σταθερή κατάσταση 0 (ήταν S=0 και R=1) τότε Qprev=0 και Q bar prev=1, άρα Q bar=NOT 0=1 και Q=NOT 1=0, δηλαδή διατηρεί αποθηκευμένη την προηγούμενη κατάσταση 0

**Ενεργοποίηση και των δύο εισόδων Set και Reset**

* Η είσοδος S (set), όταν ενεργοποιηθεί (S=1) θέτει την έξοδο της πύλης NOR N2 στην τιμή 0 (Q bar=0)
* Η είσοδος R (reset), όταν ενεργοποιηθεί (R=1) θέτει την έξοδο της πύλης NOR N1 στην τιμή 0 (Q=0)
* Η έξοδος Q bar παύει να είναι συμπληρωματική της εξόδου Q και το κύκλωμα πηγαίνει σε μία μη έγκυρη κατάσταση (Q = Q bar)

**Απενεργοποίηση και των δύο εισόδων Set και Reset**

* Εάν το κύκλωμα βρισκόταν στην μη έγκυρη κατάσταση (ήταν S=1 και R=1) τότε Qprev=0 και Q bar prev=0, άρα Q bar=NOT 0=1 και Q=NOT 0=1
* Το κύκλωμα θα εμφανίσει ταλαντώσεις ή θα βρεθεί στη μετασταθερή κατάσταση μέχρι ανεξέλεγκτα να ισορροπήσει σε μία σταθερή κατάσταση (0 ή 1)

**Σύνοψη**

* To S-R Latch ελέγχει την κατάστασή του μέσω των εισόδων S (set) και R (reset)
* S=1 και R=0  Πηγαίνει στην κατάσταση Q = 1
* S=0 και R=1  Πηγαίνει στην κατάσταση Q = 0
* Το κύκλωμα διατηρεί αποθηκευμένη μία κατάσταση Q μεγέθους ενός bit, που ταυτίζεται με την έξοδο Q
* S=0 και R=0  Αποθηκεύει την προηγούμενη κατάσταση Q = Qprev
* S=1 και R=1  Μη έγκυρη κατάσταση (Q = Q bar)
* Κάτι πρέπει να κάνουμε ώστε να την αποφύγουμε!

**D (Data) Latch (Μανδαλωτής D)**

* Το D (Data) Latch επιλύει το πρόβλημα της μη έγκυρης κατάστασης (Q = Q bar)
* Το κύκλωμα έχει δύο εισόδους: την είσοδο του ρολογιού CLK που ελέγχει πότε πρέπει να αλλάξει η κατάσταση, και την είσοδος δεδομένων D που ελέγχει τί τιμή πρέπει να έχει η κατάσταση Q
* Έχει δύο εξόδους Q και Q bar που είναι πάντα συμπληρωματικές
* Το κύκλωμα διατηρεί αποθηκευμένη μία κατάσταση Q μεγέθους ενός bit, που ταυτίζεται με την έξοδο Q
* Την σταθερή κατάσταση 0 ή την σταθερή κατάσταση 1

**Λειτουργία D Latch (CLK = 1)**

* Όταν CLK = 1, D=1  S=1 και R=0  Πηγαίνει στην κατάσταση Q = 1
* Όταν CLK = 1, D=0  S=0 και R=1  Πηγαίνει στην κατάσταση Q = 0

**Λειτουργία D Latch (CLK = 0)**

* Όταν CLK = 0, D=X  S=0 και R=0  Αποθηκεύει την προηγούμενη κατάσταση Q = Qprev

**D Latch - Σύνοψη**

* Το D Latch εξαρτάται από το επίπεδο (την τιμή 0 ή 1) του σήματος CLK
* Το D Latch ενημερώνει την κατάστασή του συνεχώς για όσο διάστημα ισχύει CLK = 1 (είναι διάφανο και συμπεριφέρεται ως απομονωτής)
* CLK=1 και D=1  Πηγαίνει στην κατάσταση Q = 1
* CLK=1 και D=0  Πηγαίνει στην κατάσταση Q = 0
* Το D Latch διατηρεί αποθηκευμένη μία κατάσταση Q μεγέθους ενός bit, που ταυτίζεται με την έξοδο Q για όσο διάστημα ισχύει CLK = 0
* CLK=0 και D=X  Αποθηκεύει την προηγούμενη κατάσταση Q = Qprev
* Δεν πηγαίνει σε μη έγκυρη κατάσταση (Q = Q bar)

**Το σήμα CLK: Latches vs Flip-Flops**

* Το σήμα του ρολογιού CLK είναι ένας τετραγωνικός παλμός με εναλλασσόμενα επίπεδα 0 και 1 και με ανερχόμενες (από το 0 στο 1) και κατερχόμενες (από το 1 στο 0) ακμές
* Τα δισταθή στοιχεία που μπορούν να ενημερώνουν συνεχώς την κατάστασή τους σε ένα από τα επίπεδα (0 ή 1) του ρολογιού αποκαλούνται Latches
* Τα δισταθή στοιχεία που ενημερώνουν την κατάστασή τους μόνο σε μια ακμή του ρολογιού, όπως για παράδειγμα στην ανερχόμενη ακμή του ρολογιού, αποκαλούνται Flip-Flops

**D (Data) Flip-Flop**

* Ένα D Flip-Flop αποτελείται από δύο D Latches συνδεδεμένα στην σειρά που ελέγχονται από συμπληρωματικά CLK
* Το πρώτο D Latch (L1) ονομάζεται αφέντης (master)
* Το δεύτερο D Latch (L2) ονομάζεται σκλάβος (slave)
* Ο Ν1 είναι ενδιάμεσος κόμβος
* Τα D Flip-Flops είναι επίσης γνωστά ως: Flip-Flop αφέντη-σκλάβου, Flip-Flop ενεργοποιούμενα στις ακμές (του CLK)

**Λειτουργία D Flip-Flop**

* Όταν CLK = 0 το D-Latch αφέντης (L1) είναι διαφανές
* Το D-Latch σκλάβος (L2) είναι αδιαφανές
* Άρα, η τιμή στην είσοδο δεδομένων D μεταφέρεται μέσω του L1 στον κόμβο N1, χωρίς να επηρεάζεται η έξοδος Q του L2
* Όταν CLK = 1 το D-Latch αφέντης (L1) είναι αδιαφανές
* Το D-Latch σκλάβος (L2) είναι διαφανές
* Άρα, η τιμή στον κόμβο N1 μεταφέρεται στην έξοδο Q του L2, ενώ η τιμή στον κόμβο N1 παραμένει σταθερή γιατί παύει να ελέγχεται από την είσοδο δεδομένων D
* Η τιμή που υπήρχε στην είσοδο δεδομένων D αμέσως πριν η τιμή του CLK μεταβεί από το 0 στο 1 αντιγράφεται στην έξοδο Q αμέσως μετά την ανερχόμενη ακμή του CLK (το D Flip-Flop ενημερώνει την κατάστασή του)
* Σε όλες τις άλλες περιπτώσεις, το D Flip-Flop διατηρεί την αποθηκευμένη κατάστασή του, επειδή υπάρχει πάντα ένας αδιαφανής D Latch που μπλοκάρει τη διαδρομή μεταξύ της εισόδου D και της εξόδου Q

**D Latch vs D Flip-Flop**

* **D Latch:** συνεχής ενημέρωση της εξόδου Q αντιγράφοντας την τιμή της εισόδου D, όσο CLK = 1
* **D Flip-Flop:** ενημέρωση της εξόδου Q αντιγράφοντας την τιμή της εισόδου D μόνο στην ανερχόμενη ακμή του CLK
* Σε όλες τις άλλες περιπτώσεις οι έξοδοι Q διατηρούν τη τιμή τους και τα κυκλώματα την κατάστασή τους
* Η κατάστασή ταυτίζεται με την τιμή της εξόδου Q
* Η αρχική τιμή της εξόδου Q είναι απροσδιόριστη
* Στην πράξη τα κυκλώματα πηγαίνουν ανεξέλεγκτα σε μία από τις δύο σταθερές καταστάσεις (0 ή 1)

**Καταχωρητές**

* Ένας καταχωρητής (register) μεγέθους N bit είναι μια συστοιχία από N Flip-Flop τα οποία χρησιμοποιούν από κοινού μια είσοδο ρολογιού CLK, έτσι ώστε όλα τα bit του καταχωρητή να ενημερώνονται ταυτόχρονα
* Οι καταχωρητές αποτελούν το θεμελιώδες δομικό στοιχείο στα σύγχρονα ακολουθιακά κυκλώματα (ή μηχανές πεπερασμένων καταστάσεων – FSM)

**Σχεδίαση άλλων Flip-Flop**

* Χρησιμοποιείται σαν βάση το D Flip-Flop, το οποίο διατηρεί αποθηκευμένη την τρέχουσα κατάστασή Q(t) (που ταυτίζεται με την τιμή της εξόδου Q), όσο το CLK δεν βρίσκεται στην ανερχόμενη ακμή του
* Πηγαίνει στην επόμενη κατάσταση Q(t+1), που είναι η τιμή που έχει η είσοδος δεδομένων D κατά την επόμενη ανερχόμενη ακμή του CLK
* Q(t+1) = D
* Προσδιορίζουμε τον πίνακα αλήθειας του νέου Flip-Flop εξετάζοντας ποιες είναι οι τιμές των εισόδων του κατά την ανερχόμενη ακμή του CLK στις εισόδους του πίνακα συμπεριλαμβάνεται η τρέχουσα κατάσταση Q(t)
* Προσδιορίζουμε την εξίσωση Boole για την επόμενη κατάσταση Q(t+1) ως συνάρτηση των εισόδων και της τρέχουσας κατάστασης Q(t) (μετά από ελαχιστοποίηση με τον χάρτη Karnaugh)
* Σχεδιάζουμε την συνδυαστική λογική με βάση την εξίσωση Boole
* Η έξοδος F αυτού του συνδυαστικού κυκλώματος συνδέεται στην είσοδο δεδομένων D του D Flip-Flop, άρα D = F
* Q(t+1) = F(Inputs, Q(t))

**D Flip-Flop με επαναφορά στο 0**

* Ένα D Flip-Flop με δυνατότητα σύγχρονης επαναφοράς στο 0 (resettable Flip-Flop) διαθέτει άλλη μία είσοδο που ονομάζεται RESET
* Η είσοδος RESET είναι σύγχρονη (δηλαδή επιδρά στο κύκλωμα στην ανερχόμενη ακμή του CLK)
* Όταν η είσοδος RESET έχει την τιμή FALSE, συμπεριφέρεται ως απλό D Flip-Flop
* Όταν η είσοδος RESET έχει την τιμή TRUE, αγνοεί την είσοδο D και επαναφέρει την κατάσταση και έξοδο Q στην τιμή 0
* Στα D Flip-Flop με δυνατότητα ασύγχρονης επαναφοράς στο 0, η επαναφορά στο 0 λαμβάνει χώρα αμέσως μόλις η είσοδος RESET πάρει την τιμή TRUE, ανεξάρτητα από την τιμή του CLK
* To ασύγχρονο σήμα επαναφοράς στο 0 ονομάζεται και CLEAR
* Αυτού του είδους τα D Flip-Flop είναι χρήσιμα στην περίπτωση που θέλουμε να επιβάλλουμε μια γνωστή κατάσταση στα Flip-Flop ενός συστήματος όταν το ενεργοποιούμε για πρώτη φορά

**D Flip-Flop με τοποθέτηση στο 1**

* Ένα D Flip-Flop με δυνατότητα σύγχρονης τοποθέτησης στο 1 (settable Flip-Flop) διαθέτει άλλη μία είσοδο που ονομάζεται SET
* Η είσοδος SET είναι σύγχρονη (δηλαδή επιδρά στο κύκλωμα στην ανερχόμενη ακμή του CLK)
* Όταν η είσοδος SET έχει την τιμή FALSE, συμπεριφέρεται ως απλό D Flip-Flop
* Όταν η είσοδος SET έχει την τιμή TRUE, αγνοεί την είσοδο D και τοποθετεί την κατάσταση και έξοδο Q στην τιμή 1
* Στα D Flip-Flop με δυνατότητα ασύγχρονης τοποθέτησης στο 1, η τοποθέτηση στο 1 λαμβάνει χώρα αμέσως μόλις η είσοδος SET πάρει την τιμή TRUE, ανεξάρτητα από την τιμή του CLK
* To ασύγχρονο σήμα τοποθέτησης στο 1 ονομάζεται και PRESET
* Αυτού του είδους τα D Flip-Flop είναι χρήσιμα στην περίπτωση που θέλουμε να επιβάλλουμε μια γνωστή κατάσταση στα Flip-Flop ενός συστήματος όταν το ενεργοποιούμε για πρώτη φορά

**T (Toggle) Flip-Flop**

* Το T (toggle, εναλλαγή) Flip-Flop διαθέτει μία είσοδο CLK και μία έξοδο Q
* Σε κάθε ανερχόμενη ακμή του CLK, η έξοδος Q εναλλάσσει την τιμή της με το συμπλήρωμα της προηγούμενης τιμής της
* To T Flip-Flop χρησιμοποιείται κυρίως ως διαιρέτης συχνότητας διά 2
* Ν T Flip-Flops στη σειρά απαρτίζουν έναν διαιρέτη συχνότητας δια 2N

**D Flip-Flop με έγκριση (enabled)**

* Ένα D Flip-Flop με έγκριση (enabled flip-flop) διαθέτει μία ακόμα είσοδο που ονομάζεται EN ή ENABLE
* Η επιπλέον είσοδος ΕΝ, χρησιμοποιείται για να καθορίζει αν τα δεδομένα θα φορτωθούν ή όχι κατά την επόμενη ακμή του CLK
* Όταν η είσοδος EN έχει την τιμή TRUE, το D Flip-Flop με έγκριση συμπεριφέρεται ως απλό D Flip-Flop
* Όταν η είσοδος EN έχει την τιμή FALSE, το D Flip-Flop με έγκριση αγνοεί το CLK και διατηρεί την κατάστασή του
* Αυτού του είδους τα κυκλώματα είναι χρήσιμα όταν θέλουμε να φορτώνουμε μια νέα τιμή σε ένα Flip-Flop μόνο σε κάποιες περιπτώσεις, και όχι σε κάθε ακμή του ρολογιού
* To σήμα έγκρισης ονομάζεται και write enable ή clock enable

**T Flip-Flop με έγκριση (enabled)**

* Ένα T Flip-Flop με έγκριση (enabled flip-flop) διαθέτει μία ακόμα είσοδο που ονομάζεται EN ή ENABLE
* Η επιπλέον είσοδος ΕΝ, χρησιμοποιείται για να καθορίζει εάν θα εναλλαχθεί ή όχι η κατάστασή του Τ Flip-Flop κατά την επόμενη ακμή του CLK
* Όταν η είσοδος EN έχει την τιμή TRUE, το T Flip-Flop με έγκριση εναλλάσσει την κατάστασή του (συμπεριφέρεται σαν T Flip-Flop)
* Όταν η είσοδος EN έχει την τιμή FALSE, το T Flip-Flop με έγκριση διατηρεί την κατάστασή του
* Αυτού του είδους τα κυκλώματα είναι ιδιαίτερα χρήσιμα στην υλοποίηση σύγχρονων μετρητών

**J-K Flip-Flop**

* Το J-K Flip-Flop δέχεται ένα σήμα CLK και δύο σύγχρονες εισόδους (το J και το K)
* Κατά την ανερχόμενη ακμή του CLK ενημερώνει την έξοδο Q, σύμφωνα με τις τιμές που έχουν οι είσοδοι J και K, ως εξής:
* Όταν οι είσοδοι J και K έχουν και οι δύο την τιμή 0, η έξοδος Q διατηρεί την προηγούμενη τιμή της (hold)
* Όταν η είσοδος J έχει την τιμή 0 και η είσοδος Κ έχει την τιμή 1, η έξοδος Q παίρνει την τιμή 0 (reset)
* Όταν η είσοδος J έχει την τιμή 1 και η είσοδος Κ έχει την τιμή 0, η έξοδος Q παίρνει την τιμή 1 (set)
* Όταν οι είσοδοι J και K έχουν και οι δύο την τιμή 1, η έξοδος Q εναλλάσσει την τιμή της με το συμπλήρωμα της προηγούμενης τιμής της (toggle)
* Αυτό το κύκλωμα ήταν ιδιαίτερα δημοφιλές την εποχή που οι υλοποιήσεις βασίζονταν σε πλακέτες με SSI και MSI ολοκληρωμένα κυκλώματα

**Επιλεγμένη άσκηση: το A-B Flip-Flop**

* Το Α-Β Flip-Flop δέχεται ένα σήμα CLK και δύο σύγχρονες εισόδους (το Α και το Β)
* Κατά την ανερχόμενη ακμή του CLK ενημερώνει την έξοδο Q, σύμφωνα με τις τιμές που έχουν οι είσοδοι Α και Β, ως εξής:
* Όταν οι είσοδοι Α και Β έχουν και οι δύο την τιμή 0, η έξοδος Q διατηρεί την προηγούμενη τιμή της (hold)
* Όταν η είσοδος Α έχει την τιμή 0 και η είσοδος Β έχει την τιμή 1, η έξοδος Q εναλλάσσει την τιμή της με το συμπλήρωμα της προηγούμενης τιμής της (toggle)
* Όταν η είσοδος Α έχει την τιμή 1 και η είσοδος Β έχει την τιμή 0, η έξοδος Q παίρνει την τιμή 0 (reset)
* Όταν οι είσοδοι Α και Β έχουν και οι δύο την τιμή 1, η έξοδος Q αντιγράφει την τιμή της εισόδου D (load)

**Μηχανές Πεπερασμένων Καταστάσεων**

* Μια **Μηχανή Πεπερασμένων Καταστάσεων** (Finite State Machine – **FSM**) είναι ένα ψηφιακό ακολουθιακό κύκλωμα, το οποίο έχει έναν πεπερασμένο αριθμό καταστάσεων.
* Στη θεωρία, η FSM δέχεται είσοδο από ένα αλφάβητο, παράγει έξοδο από ένα άλλο, και αλλάζει κατάσταση σύμφωνα με μία συνάρτηση μετάβασης καταστάσεων.
* Στην πράξη, η FSM υλοποιείται με καταχωρητές (Flip-Flops) για την αποθήκευση της κατάστασης και με συνδυαστικά κυκλώματα για την υπολογισμό της επόμενης κατάστασης και της εξόδου.

**Τύποι FSM**

Υπάρχουν δύο τύποι FSM, οι μηχανές Moore και οι μηχανές Mealy.

**Μηχανές Moore**

* Σε μια **μηχανή Moore**, η έξοδος εξαρτάται μόνο από την τρέχουσα κατάσταση, δηλαδή, η έξοδος είναι συνάρτηση μόνο των Flip-Flops.
* Οι εξόδοι της μηχανής Moore είναι συγχρονισμένες με το ρολόι, καθώς οι Flip-Flops αλλάζουν κατάσταση στην ανερχόμενη ακμή του CLK.

**Μηχανές Mealy**

* Σε μια **μηχανή Mealy**, η έξοδος εξαρτάται τόσο από την τρέχουσα κατάσταση όσο και από τις τιμές των εισόδων.
* Οι εξόδοι της μηχανής Mealy μπορούν να αλλάξουν οποιαδήποτε στιγμή, καθώς οι είσοδοι μπορούν να αλλάξουν ανεξάρτητα από το ρολόι.

**Διάγραμμα καταστάσεων FSM**

* Μια FSM μπορεί να αναπαρασταθεί με ένα διάγραμμα καταστάσεων, όπου κάθε κατάσταση είναι ένας κόμβος και οι μεταβάσεις μεταξύ τους είναι κατευθυνόμενες ακμές.
* Οι ακμές φέρουν ετικέτες με τις εισόδους που προκαλούν την μετάβαση.
* Στις μηχανές Moore, οι κόμβοι φέρουν ετικέτες με την έξοδο της αντίστοιχης κατάστασης.
* Στις μηχανές Mealy, οι ακμές φέρουν ετικέτες με την έξοδο που παράγεται κατά την μετάβαση.

**Παράδειγμα μηχανής Moore**

* Έστω μια μηχανή Moore με μία είσοδο Χ και μία έξοδο Υ, η οποία παράγει Υ = 1 όταν η ακολουθία εισόδου 110 εμφανιστεί.
* Η μηχανή θα πρέπει να έχει τρεις καταστάσεις για να θυμάται την ακολουθία:
  * Κατάσταση S0: αρχική κατάσταση (δεν έχει εμφανιστεί τίποτα)
  * Κατάσταση S1: έχει εμφανιστεί το πρώτο 1
  * Κατάσταση S2: έχει εμφανιστεί το 11
* Οι μεταβάσεις εξαρτώνται από την είσοδο Χ.

**Παράδειγμα μηχανής Mealy**

* Έστω μια μηχανή Mealy με μία είσοδο Χ και μία έξοδο Υ, η οποία παράγει Υ = 1 όταν η ακολουθία εισόδου 110 εμφανιστεί.
* Η μηχανή θα πρέπει να έχει τρεις καταστάσεις για να θυμάται την ακολουθία:
  * Κατάσταση S0: αρχική κατάσταση (δεν έχει εμφανιστεί τίποτα)
  * Κατάσταση S1: έχει εμφανιστεί το πρώτο 1
  * Κατάσταση S2: έχει εμφανιστεί το 11
* Οι μεταβάσεις εξαρτώνται από την είσοδο Χ και την έξοδο Υ.
* Η έξοδος Υ παράγεται στην μετάβαση από την κατάσταση S2 στην S0, όταν η είσοδος Χ είναι 0.

**Χρονισμός ακολουθιακής λογικής**

* Η λειτουργία των ακολουθιακών κυκλωμάτων εξαρτάται από τον χρόνο διάδοσης των σημάτων και την ταχύτητα του ρολογιού.
* **Συχνότητα ρολογιού (clock frequency):** Ο ρυθμός με τον οποίο αλλάζει το ρολόι.
* **Περίοδος ρολογιού (clock period):** Ο χρόνος που απαιτείται για έναν πλήρη κύκλο του ρολογιού.
* **Μέγιστη συχνότητα:** Εξαρτάται από την κρίσιμη διαδρομή του κυκλώματος.
* **Κρίσιμη διαδρομή:** Η μεγαλύτερη χρονική διαδρομή από την έξοδο ενός Flip-Flop στην είσοδο του επόμενου.

**Παράμετροι χρονισμού**

* **tpd:** χρόνος διάδοσης
* **tpcq:** χρόνος διάδοσης ρολογιού-εξόδου (clock-to-Q propagation delay)
* **tsetup:** χρόνος εγκατάστασης (setup time)
* **thold:** χρόνος διατήρησης (hold time)
* **tcomb:** χρόνος διάδοσης συνδυαστικής λογικής
* **tclk:** περίοδος ρολογιού

**Εξίσωση χρόνου**

* Η περίοδος του ρολογιού πρέπει να είναι μεγαλύτερη ή ίση από τον χρόνο της κρίσιμης διαδρομής:
* `tclk ≥ tpcq + tcomb + tsetup`

**Παραλληλισμός**

* Ο παραλληλισμός είναι μια τεχνική για τη βελτίωση της απόδοσης ενός συστήματος με τη χρήση πολλαπλών μονάδων επεξεργασίας.
* **Διοχέτευση (pipelining):** Μια τεχνική παραλληλισμού που επιτρέπει σε πολλαπλές λειτουργίες να εκτελούνται ταυτόχρονα, αλλά σε διαφορετικά στάδια.
* Η διοχέτευση βελτιώνει τον ρυθμό διεκπεραίωσης (throughput) αλλά αυξάνει τον λανθάνοντα χρόνο (latency).

**Διοχέτευση: παράδειγμα**

* Έστω ένα κύκλωμα με χρόνο διάδοσης 10 ns.
* Χωρίς διοχέτευση:
  * `tcomb = 10 ns`
  * `tclk ≥ 10 ns`
  * `Throughput = 1/10ns = 100 MHz`
  * `Latency = 10 ns`
* Διοχέτευση σε 2 στάδια:
  * `tcomb = 5 ns`
  * `tclk ≥ 5 ns`
  * `Throughput = 1/5ns = 200 MHz`
  * `Latency = 2 * 5 ns = 10 ns`
* Διοχέτευση σε 3 στάδια:
  * `tcomb = 3.3 ns`
  * `tclk ≥ 3.3 ns`
  * `Throughput = 1/3.3ns = 300 MHz`
  * `Latency = 3 * 3.3 ns = 10 ns`

**Διοχέτευση: συμπεράσματα**

* Η διοχέτευση αυξάνει τη διεκπεραιωτική ικανότητα (throughput) ενός κυκλώματος, καθώς επιτρέπει την εκτέλεση περισσότερων λειτουργιών ανά μονάδα χρόνου.
* Ο λανθάνων χρόνος (latency) παραμένει περίπου ο ίδιος, καθώς ο συνολικός χρόνος για την ολοκλήρωση μιας λειτουργίας δεν αλλάζει σημαντικά.

***

Ελπίζω αυτή τη φορά να λάβατε το πλήρες κείμενο που ζητήσατε. Εάν θέλετε να κάνετε κάτι άλλο με αυτό το κείμενο, μη διστάσετε να με ρωτήσετε.
